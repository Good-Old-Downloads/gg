function isalpha(e){return/^[a-zA-Z]+$/.test(e)}function process(e,t,n){if(void 0===n&&(n=1),"string"!=typeof e||"string"!=typeof t)throw new Error("vignere: key word and phrase must be strings");if(!isalpha(e))throw new Error("vignere: key word can only contain letters");e=e.toLowerCase();for(var i,a,r=t.length,o=e.length,s=0,l=0,c="";s<r;s++)isalpha(a=t[s])?(i=n>0?lowerReference.indexOf(a.toLowerCase())+lowerReference.indexOf(e[l]):(i=lowerReference.indexOf(a.toLowerCase())-lowerReference.indexOf(e[l]))<0?26+i:i,i%=26,c=-1===lowerReference.indexOf(a)?c+upperReference[i]:c+lowerReference[i],l=l+1===o?0:l+1):c+=a;return c}function cipher(e,t){return process(e,t)}function decipher(e,t){return process(e,t,-1)}function debounce(e,t,n){var i;return function(){var a=this,r=arguments,o=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(a,r)},t),o&&e.apply(a,r)}}function toggleScroll(){"no-scroll"===document.body.classList[0]?document.body.classList.remove("no-scroll"):document.body.classList.add("no-scroll")}function setModalHeight(e){var t;t="string"==typeof e?document.querySelector(e).nextElementSibling.getElementsByClassName("modal__inner")[0]:document.getElementById(e.getAttribute("for")).nextElementSibling.getElementsByClassName("modal__inner")[0];for(var n=0,i=0;i<t.childNodes.length;i++){var a=t.childNodes[i],r=a.offsetHeight;if(!isNaN(r)){var o=getComputedStyle(a);extra=parseInt(o.marginTop)+parseInt(o.marginBottom),n=n+r+extra}}n+=10,t.style.maxHeight=n+"px"}function toggleDetails(e){void 0===e&&(e=detailsOpen);for(var t=document.getElementsByClassName("light"),n=t.length-1;n>=0;n--)t[n].classList.remove("light");var i=parseInt(e.dataset.id);if(detailsOpen===e)return gameDetails.parentNode.removeChild(gameDetails),gameDetailsBg.style.display="none",detailsOpen=null,history.replaceState(null,null,currentURL),void document.body.classList.remove("dark");document.body.classList.add("dark"),e.classList.add("light");var a=document.getElementById("game-details"),r=!1;null!==a&&(detailsOpen.offsetTop!==o?a.parentNode.removeChild(a):r=!0);for(var o=e.offsetTop,s=Math.floor(o+e.clientHeight),l=Mustache.render(gameDetailsTemplate.innerHTML,{loading:!0}),c=e.parentNode.children,n=c.length-1;n>=0;n--){var u=c[n];if(o===u.offsetTop){if(r)a.outerHTML=l,gameDetails=document.getElementById("game-details");else{var d=document.createElement("div");d.innerHTML=l,gameDetails=d.children[0],u.parentNode.insertBefore(gameDetails,u.nextSibling)}break}}scrollTo({easing:"easeInOutQuad",duration:500,position:o-document.getElementById("navbar").clientHeight-10}),gameDetailsBgImage.classList.remove("fadein"),gameDetailsBg.style.display="block",gameDetailsBg.style.transform="translateY("+s+"px)",http.get({url:"/api/public/game",data:{id:i}},function(e){var t=JSON.parse(e);dank=t.dank,memes=t.memes,1==t.uploading?t.uploading=!0:t.uploading=!1,t.uriencode=function(){return function(e,t){return encodeURIComponent(t(e).toLowerCase())}},t.showdrivetut=function(){return function(e,t){if("gdrive"===t(e)||"gdrive_folder"===t(e))return' <a class="btn drive-bypass-btn" href="/google-drive-bypass-tutorial" target="_blank" title="BYPASS GOOGLE DRIVE QUOTA TUTORIAL">BYPASS GOOGLE DRIVE QUOTA TUTORIAL</a>'}},t.formatSize=function(){return function(e,t){if(""==t(e))return"";var n=parseInt(t(e));return filesize(n,2,"jedec")}};var n=Mustache.render(gameDetailsTemplate.innerHTML,t);gameDetails.outerHTML=n,gameDetails=document.getElementById("game-details"),history.replaceState(i,t.title,"/game/"+t.slug),injectCSS.innerHTML="",imagesLoaded(gameDetailsBgImage,{background:!0},function(e){injectCSS.innerHTML='#game-details > .container:before {background-image: url("//images.gog.com/'+t.bg_id+'.jpg");}',gameDetailsBgImage.style.backgroundImage="url(//images.gog.com/"+t.bg_id+".jpg)",gameDetailsBgImage.classList.add("fadein"),gameDetails.classList.add("fadein")}),gameDetails.querySelector(".close").addEventListener("click",function(e){toggleDetails()}),http.get({url:"https://api.gog.com/products/"+i,data:{expand:"changelog",x:Date.now()}},function(e){var t=JSON.parse(e).changelog;t&&(gameDetails.getElementsByClassName("toggle-changelog")[0].classList.add("fadeIn"),gameDetails.getElementsByClassName("changelog")[0].innerHTML=t)})}),detailsOpen=e}function fixlinks(e){for(var t=e.length-1;t>=0;t--){var n=e[t];if(!n.classList.contains("__no_decipher")){for(var i=n.href,a=0;a<memes;)i=decipher(dank,i),a++;n.title=i,n.href=i,n.classList.add("__no_decipher")}}}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),function(e,t){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e,t){return null!=e&&"object"==typeof e&&t in e}function a(e){return!function(e,t){return u.call(e,t)}(d,e)}function r(e){this.string=e,this.tail=e,this.pos=0}function o(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function s(){this.cache={}}var l=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===l.call(e)},u=RegExp.prototype.test,d=/\S/,f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},p=/\s*/,m=/\s+/,h=/\s*=/,g=/\s*\}/,v=/#|\^|\/|>|\{|&|=|!/;r.prototype.eos=function(){return""===this.tail},r.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},r.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},o.prototype.push=function(e){return new o(e,this)},o.prototype.lookup=function(e){var n,a=this.cache;if(a.hasOwnProperty(e))n=a[e];else{for(var r,o,s=this,l=!1;s;){if(e.indexOf(".")>0)for(n=s.view,r=e.split("."),o=0;null!=n&&o<r.length;)o===r.length-1&&(l=i(n,r[o])),n=n[r[o++]];else n=s.view[e],l=i(s.view,e);if(l)break;s=s.parent}a[e]=n}return t(n)&&(n=n.call(this.view)),n},s.prototype.clearCache=function(){this.cache={}},s.prototype.parse=function(t,i){var o=this.cache,s=o[t];return null==s&&(s=o[t+":"+(i||e.tags).join(":")]=function(t,i){function o(){if(E&&!w)for(;b.length;)delete y[b.pop()];else b=[];E=!1,w=!1}function s(e){if("string"==typeof e&&(e=e.split(m,2)),!c(e)||2!==e.length)throw new Error("Invalid tags: "+e);l=new RegExp(n(e[0])+"\\s*"),u=new RegExp("\\s*"+n(e[1])),d=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var l,u,d,f=[],y=[],b=[],E=!1,w=!1;s(i||e.tags);for(var k,x,L,C,S,T,N=new r(t);!N.eos();){if(k=N.pos,L=N.scanUntil(l))for(var I=0,B=L.length;I<B;++I)a(C=L.charAt(I))?b.push(y.length):w=!0,y.push(["text",C,k,k+1]),k+=1,"\n"===C&&o();if(!N.scan(l))break;if(E=!0,x=N.scan(v)||"name",N.scan(p),"="===x?(L=N.scanUntil(h),N.scan(h),N.scanUntil(u)):"{"===x?(L=N.scanUntil(d),N.scan(g),N.scanUntil(u),x="&"):L=N.scanUntil(u),!N.scan(u))throw new Error("Unclosed tag at "+N.pos);if(S=[x,L,k,N.pos],y.push(S),"#"===x||"^"===x)f.push(S);else if("/"===x){if(!(T=f.pop()))throw new Error('Unopened section "'+L+'" at '+k);if(T[1]!==L)throw new Error('Unclosed section "'+T[1]+'" at '+k)}else"name"===x||"{"===x||"&"===x?w=!0:"="===x&&s(L)}if(T=f.pop())throw new Error('Unclosed section "'+T[1]+'" at '+N.pos);return function(e){for(var t,n=[],i=n,a=[],r=0,o=e.length;r<o;++r)switch((t=e[r])[0]){case"#":case"^":i.push(t),a.push(t),i=t[4]=[];break;case"/":a.pop()[5]=t[2],i=a.length>0?a[a.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],a=0,r=e.length;a<r;++a)(t=e[a])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(y))}(t,i)),s},s.prototype.render=function(e,t,n){var i=this.parse(e),a=t instanceof o?t:new o(t);return this.renderTokens(i,a,n,e)},s.prototype.renderTokens=function(e,t,n,i){for(var a,r,o,s="",l=0,c=e.length;l<c;++l)o=void 0,"#"===(r=(a=e[l])[0])?o=this.renderSection(a,t,n,i):"^"===r?o=this.renderInverted(a,t,n,i):">"===r?o=this.renderPartial(a,t,n,i):"&"===r?o=this.unescapedValue(a,t):"name"===r?o=this.escapedValue(a,t):"text"===r&&(o=this.rawValue(a)),void 0!==o&&(s+=o);return s},s.prototype.renderSection=function(e,n,i,a){var r=this,o="",s=n.lookup(e[1]);if(s){if(c(s))for(var l=0,u=s.length;l<u;++l)o+=this.renderTokens(e[4],n.push(s[l]),i,a);else if("object"==typeof s||"string"==typeof s||"number"==typeof s)o+=this.renderTokens(e[4],n.push(s),i,a);else if(t(s)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(s=s.call(n.view,a.slice(e[3],e[5]),function(e){return r.render(e,n,i)}))&&(o+=s)}else o+=this.renderTokens(e[4],n,i,a);return o}},s.prototype.renderInverted=function(e,t,n,i){var a=t.lookup(e[1]);if(!a||c(a)&&0===a.length)return this.renderTokens(e[4],t,n,i)},s.prototype.renderPartial=function(e,n,i){if(i){var a=t(i)?i(e[1]):i[e[1]];return null!=a?this.renderTokens(this.parse(a),n,i,a):void 0}},s.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},s.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},s.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var y=new s;return e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return c(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return y.render(e,t,n)},e.to_html=function(n,i,a,r){var o=e.render(n,i,a);if(!t(r))return o;r(o)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return f[e]})},e.Scanner=r,e.Context=o,e.Writer=s,e});var scrollTo=function(e){var t,n={},i=function(){t=this,this.start=t.getCurrentPosition(),this.change=t.getNewPosition()-this.start,this.currentTime=0,this.increment=20,this.duration=void 0===e.duration?500:e.duration,this.fail||this.animate()};return i.prototype.animate=function(){t.currentTime+=t.increment;var n=t.easing()(t.currentTime,t.start,t.change,t.duration);document.body.scrollTop=n,document.documentElement.scrollTop=n,window.scrollTop=n,t.currentTime<t.duration?t.requestAnimFrame()(t.animate):e.callback&&"function"==typeof e.callback&&e.callback()},i.prototype.callFail=function(){t.fail=!0,console.error("Argument is not valid.")},i.prototype.getNewPosition=function(){var n,i=0;return"string"==typeof e.targetName?(n=document.querySelector(e.targetName))?i=n.getBoundingClientRect().top+window.scrollY:t.callFail():"number"==typeof e.position?i=e.position:"object"==typeof e.target&&"getBoundingClientRect"in e.target?i=e.target.getBoundingClientRect().top+window.scrollY:t.callFail(),i},i.prototype.easing=function(){var i;if(n.easing)i=n.easing;else{switch(e.easing){case"easeInCubic":i=t.easeInCubic;break;case"inOutQuintic":i=t.inOutQuintic;break;default:i=t.easeInOutQuad}n.easing=i}return i},i.prototype.easeInOutQuad=function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)},i.prototype.easeInCubic=function(e,t,n,i){return t+n*((e/=i)*e*e)},i.prototype.inOutQuintic=function(e,t,n,i){var a=(e/=i)*e,r=a*e;return t+n*(6*r*a+-15*a*a+10*r)},i.prototype.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}},i.prototype.getCurrentPosition=function(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop},new i};!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},i=n[e]=n[e]||[];return-1==i.indexOf(t)&&i.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var i=n.indexOf(t);return-1!=i&&n.splice(i,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var i=this._onceEvents&&this._onceEvents[e],a=0;a<n.length;a++){var r=n[a];i&&i[r]&&(this.off(e,r),delete i[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(n){return t(e,n)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function n(e,t){for(var n in t)e[n]=t[n];return e}function i(e,t,a){if(!(this instanceof i))return new i(e,t,a);var r=e;"string"==typeof e&&(r=document.querySelectorAll(e)),r?(this.elements=function(e){return Array.isArray(e)?e:"object"==typeof e&&"number"==typeof e.length?l.call(e):[e]}(r),this.options=n({},this.options),"function"==typeof t?a=t:n(this.options,t),a&&this.on("always",a),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):s.error("Bad element for imagesLoaded "+(r||e))}function a(e){this.img=e}function r(e,t){this.url=e,this.element=t,this.img=new Image}var o=e.jQuery,s=e.console,l=Array.prototype.slice;(i.prototype=Object.create(t.prototype)).options={},i.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},i.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&c[t]){for(var n=e.querySelectorAll("img"),i=0;i<n.length;i++){var a=n[i];this.addImage(a)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(i=0;i<r.length;i++){var o=r[i];this.addElementBackgroundImages(o)}}}};var c={1:!0,9:!0,11:!0};return i.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,i=n.exec(t.backgroundImage);null!==i;){var a=i&&i[2];a&&this.addBackground(a,e),i=n.exec(t.backgroundImage)}},i.prototype.addImage=function(e){var t=new a(e);this.images.push(t)},i.prototype.addBackground=function(e,t){var n=new r(e,t);this.images.push(n)},i.prototype.check=function(){function e(e,n,i){setTimeout(function(){t.progress(e,n,i)})}var t=this;this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(t){t.once("progress",e),t.check()}):this.complete()},i.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log("progress: "+n,e,t)},i.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},a.prototype=Object.create(t.prototype),a.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},a.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},a.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},a.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},a.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype=Object.create(a.prototype),r.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},i.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((o=t).fn.imagesLoaded=function(e,t){return new i(this,e,t).jqDeferred.promise(o(this))})},i.makeJQueryPlugin(),i}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=e()}}(function(){return function e(t,n,i){function a(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return a(n||e)},u,u.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(e,t,n){var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}t.exports=function(e,t){for(;e&&e.nodeType!==i;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}},{}],2:[function(e,t,n){function i(e,t,n,i,r){var o=function(e,t,n,i){return function(n){n.delegateTarget=a(n.target,t),n.delegateTarget&&i.call(e,n)}}.apply(this,arguments);return e.addEventListener(n,o,r),{destroy:function(){e.removeEventListener(n,o,r)}}}var a=e("./closest");t.exports=i},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!a.string(t))throw new TypeError("Second argument must be a String");if(!a.fn(n))throw new TypeError("Third argument must be a Function");if(a.node(e))return function(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}(e,t,n);if(a.nodeList(e))return function(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}(e,t,n);if(a.string(e))return function(e,t,n){return r(document.body,e,t,n)}(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}var a=e("./is"),r=e("delegate");t.exports=i},{"./is":3,delegate:2}],5:[function(e,t,n){t.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),a=document.createRange();a.selectNodeContents(e),i.removeAllRanges(),i.addRange(a),t=i.toString()}return t}},{}],6:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){a.off(e,i),t.apply(n,arguments)}var a=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,a=n.length;for(i;i<a;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],a=[];if(i&&t)for(var r=0,o=i.length;r<o;r++)i[r].fn!==t&&i[r].fn._!==t&&a.push(i[r]);return a.length?n[e]=a:delete n[e],this}},t.exports=i},{}],7:[function(e,t,n){!function(i,a){if(void 0!==n)a(t,e("select"));else{var r={exports:{}};a(r,i.select),i.clipboardAction=r.exports}}(this,function(e,t){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.container=e.container,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,n.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,n.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=r})},{select:5}],8:[function(e,t,n){!function(i,a){if(void 0!==n)a(t,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var r={exports:{}};a(r,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=r.exports}}(this,function(e,t,n,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var o=a(t),s=a(n),l=a(i),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),u(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText,this.container="object"===c(e.container)?e.container:document.body}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,l.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(t),target:this.target(t),text:this.text(t),container:this.container,trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return r("action",e)}},{key:"defaultTarget",value:function(e){var t=r("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return r("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}();e.exports=d})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(e,t){"object"==typeof module&&module.exports?module.exports=t():e.filesize=t()}("undefined"!=typeof window?window:this,function(){var e={iec:"_Ki_Mi_Gi_Ti_Pi_Ei_Zi_Yi",si:"_K_M_G_T_P_E_Z_Y"};return function(t,n,i){t=Math.abs(t),n||0===n||(n=1);var a="si"==i?1e3:1024,r=0;for(e[i]||(i="si");t>=a;)t/=a,++r;return t.toFixed(n)+" "+e[i].split("_")[r]+"B"}});var lowerReference="abcdefghijklmnopqrstuvwxyz",upperReference="ABCDEFGHIJKLMNOPQRSTUVWXYZ";!function(e,t){"function"==typeof define&&define.amd?define([],t):e.visualCaptcha=t()}(this,function(){var e,t,n;return function(i){function a(e,t){return y.call(e,t)}function r(e,t){var n,i,a,r,o,s,l,c,u,d,f,p=t&&t.split("/"),m=g.map,h=m&&m["*"]||{};if(e&&"."===e.charAt(0))if(t){for(p=p.slice(0,p.length-1),o=(e=e.split("/")).length-1,g.nodeIdCompat&&E.test(e[o])&&(e[o]=e[o].replace(E,"")),e=p.concat(e),u=0;u<e.length;u+=1)if("."===(f=e[u]))e.splice(u,1),u-=1;else if(".."===f){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((p||h)&&m){for(u=(n=e.split("/")).length;u>0;u-=1){if(i=n.slice(0,u).join("/"),p)for(d=p.length;d>0;d-=1)if((a=m[p.slice(0,d).join("/")])&&(a=a[i])){r=a,s=u;break}if(r)break;!l&&h&&h[i]&&(l=h[i],c=u)}!r&&l&&(r=l,s=c),r&&(n.splice(0,s,r),e=n.join("/"))}return e}function o(e,t){return function(){return d.apply(i,b.call(arguments,0).concat([e,t]))}}function s(e){return function(t){m[e]=t}}function l(e){if(a(h,e)){var t=h[e];delete h[e],v[e]=!0,u.apply(i,t)}if(!a(m,e)&&!a(v,e))throw new Error("No "+e);return m[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}var u,d,f,p,m={},h={},g={},v={},y=Object.prototype.hasOwnProperty,b=[].slice,E=/\.js$/;f=function(e,t){var n,i=c(e),a=i[0];return e=i[1],a&&(n=l(a=r(a,t))),a?e=n&&n.normalize?n.normalize(e,function(e){return function(t){return r(t,e)}}(t)):r(e,t):(a=(i=c(e=r(e,t)))[0],e=i[1],a&&(n=l(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:n}},p={require:function(e){return o(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:function(e){return function(){return g&&g.config&&g.config[e]||{}}}(e)}}},u=function(e,t,n,r){var c,u,d,g,y,b,E=[],w=typeof n;if(r=r||e,"undefined"===w||"function"===w){for(t=!t.length&&n.length?["require","exports","module"]:t,y=0;y<t.length;y+=1)if(g=f(t[y],r),"require"===(u=g.f))E[y]=p.require(e);else if("exports"===u)E[y]=p.exports(e),b=!0;else if("module"===u)c=E[y]=p.module(e);else if(a(m,u)||a(h,u)||a(v,u))E[y]=l(u);else{if(!g.p)throw new Error(e+" missing "+u);g.p.load(g.n,o(r,!0),s(u),{}),E[y]=m[u]}d=n?n.apply(m[e],E):void 0,e&&(c&&c.exports!==i&&c.exports!==m[e]?m[e]=c.exports:d===i&&b||(m[e]=d))}else e&&(m[e]=n)},e=t=d=function(e,t,n,a,r){if("string"==typeof e)return p[e]?p[e](t):l(f(e,t).f);if(!e.splice){if((g=e).deps&&d(g.deps,g.callback),!t)return;t.splice?(e=t,t=n,n=null):e=i}return t=t||function(){},"function"==typeof n&&(n=a,a=r),a?u(i,e,t,n):setTimeout(function(){u(i,e,t,n)},4),d},d.config=function(e){return d(e)},e._defined=m,(n=function(e,t,n){t.splice||(n=t,t=[]),a(m,e)||a(h,e)||(h[e]=[e,t,n])}).amd={jQuery:!0}}(),n("almond",function(){}),n("visualcaptcha/core",[],function(){"use strict";var e,t,n,i,a,r,o,s;return e=function(e,t,n){return n=n||[],e.namespace&&e.namespace.length>0&&n.push(e.namespaceFieldName+"="+e.namespace),n.push(e.randomParam+"="+e.randomNonce),t+"?"+n.join("&")},t=function(e){var t,i=this;e.applyRandomNonce(),e.isLoading=!0,t=n(e),e._loading(i),e.callbacks.loading&&e.callbacks.loading(i),e.request(t,function(t){t.audioFieldName&&(e.audioFieldName=t.audioFieldName),t.imageFieldName&&(e.imageFieldName=t.imageFieldName),t.imageName&&(e.imageName=t.imageName),t.values&&(e.imageValues=t.values),e.isLoading=!1,e.hasLoaded=!0,e._loaded(i),e.callbacks.loaded&&e.callbacks.loaded(i)})},n=function(t){var n=t.url+t.routes.start+"/"+t.numberOfImages;return e(t,n)},i=function(t,n){var i="",a=[];return n<0||n>=t.numberOfImages?i:(this.isRetina()&&a.push("retina=1"),i=t.url+t.routes.image+"/"+n,e(t,i,a))},a=function(t,n){var i=t.url+t.routes.audio;return n&&(i+="/ogg"),e(t,i)},r=function(e,t){return t>=0&&t<e.numberOfImages?e.imageValues[t]:""},o=function(){return void 0!==window.devicePixelRatio&&window.devicePixelRatio>1},s=function(){return!1},function(e){var n,l,c,u,d,f,p,m,h,g,v,y,b;return l=function(){return t.call(this,e)},c=function(){return e.isLoading},u=function(){return e.hasLoaded},d=function(){return e.imageValues.length},f=function(){return e.imageName},p=function(t){return r.call(this,e,t)},m=function(t){return i.call(this,e,t)},h=function(t){return a.call(this,e,t)},g=function(){return e.imageFieldName},v=function(){return e.audioFieldName},y=function(){return e.namespace},b=function(){return e.namespaceFieldName},n={refresh:l,isLoading:c,hasLoaded:u,numberOfImages:d,imageName:f,imageValue:p,imageUrl:m,audioUrl:h,imageFieldName:g,audioFieldName:v,namespace:y,namespaceFieldName:b,isRetina:o,supportsAudio:s},e.autoRefresh&&n.refresh(),n}}),n("visualcaptcha/xhr-request",[],function(){"use strict";var e=window.XMLHttpRequest;return function(t,n){var i=new e;i.open("GET",t,!0),i.onreadystatechange=function(){var e;4===i.readyState&&200===i.status&&(e=JSON.parse(i.responseText),n(e))},i.send()}}),n("visualcaptcha/config",["visualcaptcha/xhr-request"],function(e){"use strict";return function(t){var n=window.location.href.split("/");n[n.length-1]="";var i={request:e,url:n.join("/").slice(0,-1),namespace:"",namespaceFieldName:"namespace",routes:{start:"/start",image:"/image",audio:"/audio"},isLoading:!1,hasLoaded:!1,autoRefresh:!0,numberOfImages:6,randomNonce:"",randomParam:"r",audioFieldName:"",imageFieldName:"",imageName:"",imageValues:[],callbacks:{},_loading:function(){},_loaded:function(){}};return i.applyRandomNonce=function(){return i.randomNonce=Math.random().toString(36).substring(2)},t.request&&(i.request=t.request),t.url&&(i.url=t.url),t.namespace&&(i.namespace=t.namespace),t.namespaceFieldName&&(i.namespaceFieldName=t.namespaceFieldName),void 0!==t.autoRefresh&&(i.autoRefresh=t.autoRefresh),t.numberOfImages&&(i.numberOfImages=t.numberOfImages),t.routes&&(t.routes.start&&(i.routes.start=t.routes.start),t.routes.image&&(i.routes.image=t.routes.image),t.routes.audio&&(i.routes.audio=t.routes.audio)),t.randomParam&&(i.randomParam=t.randomParam),t.callbacks&&(t.callbacks.loading&&(i.callbacks.loading=t.callbacks.loading),t.callbacks.loaded&&(i.callbacks.loaded=t.callbacks.loaded)),t._loading&&(i._loading=t._loading),t._loaded&&(i._loaded=t._loaded),i}}),n("visualcaptcha",["require","visualcaptcha/core","visualcaptcha/config"],function(e){"use strict";var t=e("visualcaptcha/core"),n=e("visualcaptcha/config");return function(e){return e=e||{},t(n(e))}}),n("visualcaptcha/deep-extend",[],function(){"use strict";var e;return e=function(t,n){t=t||{};for(var i in n)n[i]&&n[i].constructor&&n[i].constructor===Object?(t[i]=t[i]||{},e(t[i],n[i])):t[i]=n[i];return t}}),n("visualcaptcha/helpers",[],function(){"use strict";var e,t,n,i,a,r,o;return e=function(e,t){return t?e[0]:Array.prototype.slice.call(e)},t=function(t,n,i){var a=t.getElementsByClassName(n);return e(a,i)},n=function(t,n,i){var a=t.getElementsByTagName(n);return e(a,i)},i=function(e,t){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");return e.className&&n.test(e.className)},a=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)a(e[n],t);else i(e,t)||(e.className.length>0?e.className+=" "+t:e.className=t)},r=function(e,t){var n;if(Array.isArray(e))for(var i=0;i<e.length;i++)r(e[i],t);else n=new RegExp("(\\s|^)"+t+"(\\s|$)"),e.className=e.className.replace(n," ").replace(/(^\s*)|(\s*$)/g,"")},o=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)o(e[n],t);else e.addEventListener?e.addEventListener("click",t,!1):e.attachEvent("onclick",t)},{findByClass:t,findByTag:n,hasClass:i,addClass:a,removeClass:r,bindClick:o}}),n("visualcaptcha/templates",[],function(){"use strict";var e,t,n,i,a,r,o;return e=function(e,t){for(var n in t)e=e.replace(new RegExp("{"+n+"}","g"),t[n]);return e},t=function(t,n,i){var a;return'<div class="visualCaptcha-accessibility-button"><a href="#"><img src="{path}accessibility{retinaExtra}.png" title="{accessibilityTitle}" alt="{accessibilityAlt}" /></a></div>','<div class="visualCaptcha-refresh-button"><a class="btn blue" href="#" title="{refreshTitle}" alt="{refreshAlt}"><i class="fas fa-sync"></i></a></div>',"",a={path:i||"",refreshTitle:n.refreshTitle,refreshAlt:n.refreshAlt,accessibilityTitle:n.accessibilityTitle,accessibilityAlt:n.accessibilityAlt,retinaExtra:t.isRetina()?"@2x":""},e("",a)},n=function(t,n){var i,a;return t.supportsAudio()?(i='<div class="visualCaptcha-accessibility-wrapper visualCaptcha-hide"><div class="accessibility-description">{accessibilityDescription}</div><audio preload="preload"><source src="{audioURL}" type="audio/ogg" /><source src="{audioURL}" type="audio/mpeg" /></audio></div>',a={accessibilityDescription:n.accessibilityDescription,audioURL:t.audioUrl(),audioFieldName:t.audioFieldName()},e(i,a)):""},i=function(t,n){for(var i,a,r="",o=0,s=t.numberOfImages();o<s;o++)i='<div class="img"><a href="#"><img src="{imageUrl}" id="visualCaptcha-img-{i}" data-index="{i}" alt="" title="" /></a></div>',a={imageUrl:t.imageUrl(o),i:o},r+=e(i,a);return i='<p class="visualCaptcha-explanation">{explanation}</p><div class="visualCaptcha-possibilities">{images}</div>',a={imageFieldName:t.imageFieldName(),explanation:n.explanation.replace(/ANSWER/,t.imageName()),images:r},e(i,a)},a=function(t){var n,i;return n='<input class="form-control audioField" type="text" name="{audioFieldName}" value="" autocomplete="off" />',i={audioFieldName:t.audioFieldName()},e(n,i)},r=function(t,n){var i,a;return i='<input class="form-control imageField" type="hidden" name="{imageFieldName}" value="{value}" readonly="readonly" />',a={imageFieldName:t.imageFieldName(),value:t.imageValue(n)},e(i,a)},o=function(t){var n,i,a=t.namespace();return a&&0!==a.length?(n='<input type="hidden" name="{fieldName}" value="{value}" />',i={fieldName:t.namespaceFieldName(),value:a},e(n,i)):""},{buttons:t,accessibility:n,images:i,audioInput:a,imageInput:r,namespaceInput:o}}),n("visualcaptcha/language",[],function(){"use strict";return{accessibilityAlt:"Sound icon",accessibilityTitle:"Accessibility option: listen to a question and answer it!",accessibilityDescription:"Type below the <strong>answer</strong> to what you hear. Numbers or words:",explanation:"<strong>ANSWER</strong>",refreshAlt:"Refresh/reload icon",refreshTitle:"Refresh/reload images!"}}),n("visualcaptcha.vanilla",["visualcaptcha","visualcaptcha/deep-extend","visualcaptcha/helpers","visualcaptcha/templates","visualcaptcha/language"],function(e,t,n,i,a){"use strict";var r,o,s,l;return r=function(){},o=function(e,t){var a,r,o=e.config;a=i.namespaceInput(t)+i.accessibility(t,o.language)+i.images(t,o.language)+i.buttons(t,o.language,o.imgPath),e.innerHTML=a,r=n.findByClass(e,"visualCaptcha-possibilities",!0),n.bindClick(n.findByClass(r,"img"),s.bind(null,e,t))},function(e,t){var a,r,o,s,l=n.findByClass(e,"visualCaptcha-accessibility-wrapper",!0),c=n.findByClass(e,"visualCaptcha-possibilities",!0),u=n.findByClass(e,"visualCaptcha-explanation",!0),d=n.findByTag(l,"audio",!0);n.hasClass(l,"visualCaptcha-hide")?(n.addClass(c,"visualCaptcha-hide"),n.addClass(u,"visualCaptcha-hide"),a=n.findByClass(c,"img"),n.removeClass(a,"visualCaptcha-selected"),void 0!==(r=n.findByTag(u,"input",!0))&&(r.value=""),s=i.audioInput(t),l.innerHTML=l.innerHTML.replace("<audio",s+"<audio"),n.removeClass(l,"visualCaptcha-hide"),d.load(),d.play()):(d.pause(),n.addClass(l,"visualCaptcha-hide"),o=n.findByTag(l,"input",!0),l.removeChild(o),n.removeClass(u,"visualCaptcha-hide"),n.removeClass(c,"visualCaptcha-hide"))},s=function(e,t,a){var r,o,s,l,c,u=a.currentTarget,d=n.findByClass(e,"visualCaptcha-possibilities",!0),f=n.findByClass(e,"visualCaptcha-explanation",!0);(l=n.findByTag(f,"input",!0))&&(f.removeChild(l),o=n.findByClass(d,"img"),n.removeClass(o,"visualCaptcha-selected")),n.addClass(u,"visualCaptcha-selected"),r=n.findByTag(u,"img",!0),s=parseInt(r.getAttribute("data-index"),10),c=i.imageInput(t,s),f.innerHTML+=c},function(e,t){t.refresh()},l=function(e){var t=n.findByClass(e,"imageField",!0)||{},i=n.findByClass(e,"audioField",!0)||{},a=!(!t.value&&!i.value);return a?{valid:a,name:t.value?t.name:i.name,value:t.value?t.value:i.value}:{valid:a}},function(i,s){var c,u,d;return c=t({imgPath:"/",language:a,captcha:{}},s),i="string"==typeof i?document.getElementById(i):i,i.config=c,n.addClass(i,"visualCaptcha"),d=t(c.captcha,{_loading:r.bind(null,i),_loaded:o.bind(null,i)}),void 0!==i.getAttribute("data-namespace")&&(d.namespace=i.getAttribute("data-namespace")),u=e(d),u.getCaptchaData=l.bind(null,i),"function"==typeof c.init&&c.init.call(null,u),u}}),t("visualcaptcha.vanilla")}),document.body.classList.remove("no-js");var timeyWimey=function(e){this.container=void 0===e?document:e,this.init=function(){for(var e=this.container.querySelectorAll("[data-moment]"),t=0;t<e.length;t++){var n=e[t];this.format(n.dataset.moment,n)}},this.format=function(e,t){var n=t.dataset.format,i=t.dataset.time;switch(e){case"epoch":"fromnow"===n&&this.replace(moment.unix(parseInt(i)).format("LLLL"),moment.unix(parseInt(i)).fromNow(),t)}},this.replace=function(e,t,n){n.setAttribute("title",e),n.textContent=t}},http=new(http=function(){this.toParam=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},this.fromParam=function(e){return JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')},this.get=function(e,t){var n=this.toParam(e.data),i=new XMLHttpRequest;if(i.onreadystatechange=function(){4==i.readyState&&200==i.status&&t(i.responseText)},i.open("GET",e.url+"?"+n,!0),void 0!==e.headers)for(var a in e.headers)e.headers.hasOwnProperty(a)&&i.setRequestHeader(a,e.headers[a]);return i.send(null),i},this.post=function(e,t){void 0===t&&(t=function(){});var n=!0;try{e.data.entries()}catch(e){n=!1}var i=new XMLHttpRequest;if(i.onreadystatechange=function(){4==i.readyState&&200==i.status&&t(i.responseText)},i.open("POST",e.url,!0),void 0!==e.headers)for(var a in e.headers)e.headers.hasOwnProperty(a)&&i.setRequestHeader(a,e.headers[a]);if(n)i.send(e.data);else{var r=this.toParam(e.data);i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(r)}return i}}),time=new timeyWimey;time.init(),document.addEventListener("change",function(e){e.target&&e.target.classList.contains("modal-state")&&toggleScroll()}),document.addEventListener("click",function(e){e.target&&e.target.classList.contains("modal-calc-height")&&"LABEL"===e.target.tagName&&setModalHeight(e.target)}),document.addEventListener("click",function(e){e.target&&"faq"===e.target.id&&(e.preventDefault(),toggleScroll(),setModalHeight("#modal-faq"),document.getElementById("modal-faq").checked=!0),!e.target||"donate"!==e.target.id&&"donate-bar"!==e.target.id||(e.preventDefault(),toggleScroll(),setModalHeight("#modal-donate"),document.getElementById("modal-donate").checked=!0)});var gameDetailsTemplate=document.getElementById("tpl-details"),injectCSS=document.getElementById("css-inject");gameDetailsTemplate&&Mustache.parse(gameDetailsTemplate.innerHTML);var gameDetails,gameDetailsBg=document.getElementById("game-details-bg");if(gameDetailsBg)var gameDetailsBgImage=gameDetailsBg.getElementsByClassName("bg")[0];for(var dank,memes,detailsOpen=null,currentURL=window.location.href,gameBlocks=document.getElementsByClassName("game-blocks"),i=0;i<gameBlocks.length;i++)gameBlocks[i].addEventListener("click",function(e){var t=e.target.closest(".block");e.target&&null!==e.target.closest(".block")&&(e.preventDefault(),toggleDetails(t))});if(document.body.addEventListener("click",function(e){e.target&&e.target.classList.contains("dark")&&toggleDetails()}),document.addEventListener("click",function(e){if(e.target&&e.target.classList.contains("toggle-links")){e.preventDefault();i=e.target.nextElementSibling.nextElementSibling.nextElementSibling.nextElementSibling;if((a=e.target.nextElementSibling.nextElementSibling.nextElementSibling).classList.contains("open")){(t=a.cloneNode(!0)).classList.add("calcSize"),a.parentNode.insertBefore(t,a.nextSibling);n=t.clientHeight;return t.parentNode.removeChild(t),a.classList.add("open"),a.style.height=n+"px",setTimeout(function(){a.style.height=null},40),void a.classList.remove("open")}i.classList.contains("open")&&(i.style.height=null,i.classList.remove("open"));var t=a.cloneNode(!0);t.classList.add("calcSize"),a.parentNode.insertBefore(t,a.nextSibling);var n=t.clientHeight;t.parentNode.removeChild(t),a.classList.add("open"),a.style.height=n+"px",setTimeout(function(){a.style.height="auto"},200)}if(e.target&&e.target.classList.contains("toggle-changelog")){e.preventDefault();var i,a=e.target.nextElementSibling;if((i=e.target.nextElementSibling.nextElementSibling).classList.contains("open"))i.style.height=null,i.classList.remove("open");else{a.classList.contains("open")&&(a.style.height=null,a.classList.remove("open"));var r=i.cloneNode(!0);r.classList.add("calcSize"),i.parentNode.insertBefore(r,i.nextSibling);var o=r.clientHeight;r.parentNode.removeChild(r),i.classList.add("open"),i.style.height=o+"px"}}}),new Clipboard(".clip",{text:function(e){var t=e.parentNode.querySelectorAll("a.item");fixlinks(t),t=e.parentNode.querySelectorAll("a.item");for(var n=[],i=0;i<t.length;i++){var a=t[i];n.push(a.href)}return n.join("\n")}}),document.addEventListener("click",function(e){if(e.target&&e.target.classList.contains("open-all")||e.target.closest(".open-all")){var t=e.target;e.target.closest(".open-all")&&(t=e.target.closest(".open-all"));var n=[],i=t.parentNode.querySelectorAll("a.item");fixlinks(i),i=t.parentNode.querySelectorAll("a.item");for(o=0;o<i.length;o++){var a=i[o];n.push(a.href)}for(var r=0,o=0;o<n.length;o++)navigator.userAgent.toLowerCase().indexOf("firefox")>-1?function(e){setTimeout(function(){var t=document.createElement("a");t.download="",t.href=n[e],t.target="_blank",t.dispatchEvent(new MouseEvent("click"))},100*++r)}(o):function(e){setTimeout(function(){window.open(n[e],"_blank")},1e3)}(o)}},!1),document.querySelector(".view-changer > form")&&document.querySelector(".view-changer > form").addEventListener("submit",function(e){e.preventDefault();for(var t=document.activeElement.value,n=document.getElementsByClassName("game-blocks"),i=n.length-1;i>=0;i--)n[i].setAttribute("class","game-blocks"),n[i].classList.add(t+"-view");http.post({url:"/",data:{setview:t}})}),document.querySelector("#search-bar").addEventListener("submit",function(e){e.preventDefault();var t=this.querySelector("input").value;window.location.href="/search/"+encodeURIComponent(t)}),document.querySelector(".container.game")){var id=document.querySelector(".container.game").dataset.id;http.get({url:"https://api.gog.com/products/"+id,data:{expand:"changelog",x:Date.now()}},function(e){var t=JSON.parse(e).changelog;if(t){var n=document.getElementById("game-details");n.getElementsByClassName("toggle-changelog")[0].classList.add("fadeIn"),n.getElementsByClassName("changelog")[0].innerHTML=t}})}document.addEventListener("click",function(e){if(e.target&&e.target.matches("label.item, label.item *")){e.stopPropagation();var t,n;"LABEL"!==e.target.tagName?(t=e.target.closest("label.item").nextElementSibling.nextElementSibling.children,n=e.target.closest("label.item")):(t=e.target.nextElementSibling.nextElementSibling.children,n=e.target);var i=n.getElementsByClassName("fas")[0];i.classList.contains("fa-minus")?(i.classList.remove("fa-minus"),i.classList.add("fa-plus")):(i.classList.remove("fa-plus"),i.classList.add("fa-minus"),i.title=i.dataset.toggledText),fixlinks(t)}},!1);var captcha;document.addEventListener("click",function(e){if(e.target&&e.target.matches(".__vote-modal-trigger")){e.stopPropagation();var t=parseInt(e.target.dataset.id);voteBtn.classList.add("hidden"),document.getElementById("vote-captcha-message").classList.add("hidden"),document.getElementById("vote-captcha").classList.remove("hidden"),document.getElementById("vote-captcha-success").classList.add("hidden"),captcha=visualCaptcha("vote-captcha",{captcha:{numberOfImages:9,url:window.location.origin+"/annoyanator",randomParam:"what-are-you-looking-at",routes:{start:"/begin",image:"/img"},callbacks:{loaded:function(n){setModalHeight("#modal-captcha"),document.getElementById("modal-captcha").checked=!0,n.gameid=t,n.voteTrigger=e.target;var i=document.getElementById("vote-captcha").getElementsByClassName("img");Array.prototype.slice.call(i).forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),voteBtn.classList.remove("hidden"),setModalHeight("#modal-captcha")},!1)})}}}})}},!1);var voteBtn=document.getElementsByClassName("__vote")[0];voteBtn.addEventListener("click",function(e){e.preventDefault();var t=captcha.getCaptchaData();if(t.valid){var n=captcha.imageFieldName(),i=t.value,a={id:captcha.gameid};a[n]=i;var r=document.getElementById("vote-captcha-message"),o=document.getElementById("vote-captcha-success");http.post({url:"/api/public/vote",data:a},function(e){var t=JSON.parse(e);t.SUCCESS?(captcha.voteTrigger.classList.add("hidden"),document.getElementById("vote-captcha").classList.add("hidden"),o.classList.remove("hidden"),voteBtn.classList.add("hidden"),r.classList.add("hidden"),setModalHeight("#modal-captcha")):(captcha.refresh(),o.classList.add("hidden"),voteBtn.classList.add("hidden"),r.classList.remove("hidden"),r.classList.add("txt-red"),r.innerText=t.MSG)})}},!1);